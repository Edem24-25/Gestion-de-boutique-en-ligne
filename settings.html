<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paramètres - Boutique en Ligne</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Navigation Principale -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary sticky-top">
        <div class="container-fluid">
            <a class="navbar-brand fw-bold" href="home.html">
                <i class="bi bi-shop"></i> StoreManager Pro
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">
                            <i class="bi bi-speedometer2"></i> Tableau de Bord
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="orders.html">
                            <i class="bi bi-cart-check"></i> Commandes
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="inventory.html">
                            <i class="bi bi-boxes"></i> Inventaire
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="customers.html">
                            <i class="bi bi-people"></i> Clients
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="reports.html">
                            <i class="bi bi-bar-chart"></i> Rapports
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="settings.html">
                            <i class="bi bi-gear"></i> Paramètres
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="home.html">
                            <i class="bi bi-house"></i> Accueil
                        </a>
                    </li>
                </ul>
                <div class="d-flex ms-auto align-items-center">
                    <div class="dropdown">
                        <button class="btn btn-outline-light btn-sm dropdown-toggle" type="button" id="profileDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="bi bi-person-circle"></i> <span id="userName">Admin</span>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileDropdown">
                            <li><a class="dropdown-item" href="settings.html"><i class="bi bi-gear"></i> Paramètres</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="#" onclick="logout()"><i class="bi bi-box-arrow-right"></i> Déconnexion</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <main class="p-4">
                <h1 class="mb-4">Paramètres</h1>

                <!-- Tab Navigation -->
                <ul class="nav nav-tabs mb-4" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="general-tab" data-bs-toggle="tab" data-bs-target="#general" type="button" role="tab" aria-controls="general" aria-selected="true">
                            <i class="bi bi-gear"></i> Général
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="store-tab" data-bs-toggle="tab" data-bs-target="#store" type="button" role="tab" aria-controls="store" aria-selected="false">
                            <i class="bi bi-shop"></i> Boutique
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="logistics-tab" data-bs-toggle="tab" data-bs-target="#logistics" type="button" role="tab" aria-controls="logistics" aria-selected="false">
                            <i class="bi bi-truck"></i> Logistique
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="users-tab" data-bs-toggle="tab" data-bs-target="#users" type="button" role="tab" aria-controls="users" aria-selected="false">
                            <i class="bi bi-people"></i> Utilisateurs
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="security-tab" data-bs-toggle="tab" data-bs-target="#security" type="button" role="tab" aria-controls="security" aria-selected="false">
                            <i class="bi bi-lock"></i> Sécurité
                        </button>
                    </li>
                </ul>

                <!-- Tab Content -->
                <div class="tab-content">
                    <!-- Général Tab -->
                    <div class="tab-pane fade show active" id="general" role="tabpanel" aria-labelledby="general-tab">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title mb-4">Paramètres Généraux</h5>

                                <div class="mb-3">
                                    <label for="businessName" class="form-label">Nom de l'Entreprise</label>
                                    <input type="text" class="form-control" id="businessName" value="Mon Magasin Électronique">
                                </div>

                                <div class="mb-3">
                                    <label for="businessEmail" class="form-label">Email Principal</label>
                                    <input type="email" class="form-control" id="businessEmail" value="contact@magasin.com">
                                </div>

                                <div class="mb-3">
                                    <label for="businessPhone" class="form-label">Téléphone</label>
                                    <input type="tel" class="form-control" id="businessPhone" value="+33 1 23 45 67 89">
                                </div>

                                <div class="mb-3">
                                    <label for="businessAddress" class="form-label">Adresse</label>
                                    <textarea class="form-control" id="businessAddress" rows="3">123 Rue de Paris, 75000 Paris</textarea>
                                </div>

                                <div class="mb-3">
                                    <label for="timezone" class="form-label">Fuseau Horaire</label>
                                    <select class="form-select" id="timezone">
                                        <option value="Europe/Paris" selected>Europe/Paris (GMT+1)</option>
                                        <option value="Europe/London">Europe/London (GMT+0)</option>
                                        <option value="Europe/Berlin">Europe/Berlin (GMT+1)</option>
                                    </select>
                                </div>

                                <div class="mb-3">
                                    <label for="currency" class="form-label">Devise</label>
                                    <select class="form-select" id="currency">
                                        <option value="EUR" selected>Euro (€)</option>
                                        <option value="USD">Dollar ($)</option>
                                        <option value="GBP">Livre (£)</option>
                                    </select>
                                </div>

                                <button class="btn btn-primary" onclick="saveSettings('general')">
                                    <i class="bi bi-check-circle"></i> Enregistrer les modifications
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Boutique Tab -->
                    <div class="tab-pane fade" id="store" role="tabpanel" aria-labelledby="store-tab">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title mb-4">Paramètres Boutique</h5>

                                <h6>Gestion des Catégories</h6>
                                <div class="mb-3">
                                    <div class="list-group mb-3">
                                        <div class="list-group-item">
                                            <div class="d-flex justify-content-between">
                                                <span>Électronique</span>
                                                <div>
                                                    <button class="btn btn-sm btn-outline-primary">Éditer</button>
                                                    <button class="btn btn-sm btn-outline-danger">Supprimer</button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="list-group-item">
                                            <div class="d-flex justify-content-between">
                                                <span>Accessoires</span>
                                                <div>
                                                    <button class="btn btn-sm btn-outline-primary">Éditer</button>
                                                    <button class="btn btn-sm btn-outline-danger">Supprimer</button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="list-group-item">
                                            <div class="d-flex justify-content-between">
                                                <span>Logiciels</span>
                                                <div>
                                                    <button class="btn btn-sm btn-outline-primary">Éditer</button>
                                                    <button class="btn btn-sm btn-outline-danger">Supprimer</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="mb-3">
                                    <label for="newCategory" class="form-label">Ajouter une Nouvelle Catégorie</label>
                                    <div class="input-group">
                                        <input type="text" class="form-control" id="newCategory" placeholder="Nom de la catégorie">
                                        <button class="btn btn-outline-secondary" type="button" onclick="addCategory()">
                                            <i class="bi bi-plus-circle"></i> Ajouter
                                        </button>
                                    </div>
                                </div>

                                <hr>

                                <h6>Réglages de Vente</h6>
                                <div class="mb-3">
                                    <label for="minOrder" class="form-label">Montant Minimum de Commande (€)</label>
                                    <input type="number" class="form-control" id="minOrder" value="50" min="0" step="0.01">
                                </div>

                                <div class="mb-3">
                                    <label for="taxRate" class="form-label">Taux de Taxe (%)</label>
                                    <input type="number" class="form-control" id="taxRate" value="20" min="0" max="100" step="0.1">
                                </div>

                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="checkbox" id="allowGuest" checked>
                                    <label class="form-check-label" for="allowGuest">
                                        Permettre les achats sans compte
                                    </label>
                                </div>

                                <button class="btn btn-primary" onclick="saveSettings('store')">
                                    <i class="bi bi-check-circle"></i> Enregistrer les modifications
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Logistique Tab -->
                    <div class="tab-pane fade" id="logistics" role="tabpanel" aria-labelledby="logistics-tab">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title mb-4">Paramètres Logistique</h5>

                                <h6>Transporteurs</h6>
                                <div class="list-group mb-3">
                                    <div class="list-group-item">
                                        <div class="d-flex justify-content-between">
                                            <div>
                                                <strong>La Poste</strong>
                                                <br>
                                                <small class="text-muted">Coût: 5,99 € - Délai: 2-3 jours</small>
                                            </div>
                                            <button class="btn btn-sm btn-outline-primary">Éditer</button>
                                        </div>
                                    </div>
                                    <div class="list-group-item">
                                        <div class="d-flex justify-content-between">
                                            <div>
                                                <strong>Chronopost</strong>
                                                <br>
                                                <small class="text-muted">Coût: 9,99 € - Délai: 24h</small>
                                            </div>
                                            <button class="btn btn-sm btn-outline-primary">Éditer</button>
                                        </div>
                                    </div>
                                    <div class="list-group-item">
                                        <div class="d-flex justify-content-between">
                                            <div>
                                                <strong>UPS</strong>
                                                <br>
                                                <small class="text-muted">Coût: 12,99 € - Délai: 1-2 jours</small>
                                            </div>
                                            <button class="btn btn-sm btn-outline-primary">Éditer</button>
                                        </div>
                                    </div>
                                </div>

                                <button class="btn btn-outline-secondary mb-3" onclick="addCarrier()">
                                    <i class="bi bi-plus-circle"></i> Ajouter un Transporteur
                                </button>

                                <hr>

                                <h6>Zones de Livraison</h6>
                                <div class="mb-3">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="shipFrance" checked>
                                        <label class="form-check-label" for="shipFrance">
                                            France Métropolitaine
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="shipEU">
                                        <label class="form-check-label" for="shipEU">
                                            Union Européenne
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="shipWorld">
                                        <label class="form-check-label" for="shipWorld">
                                            Monde Entier
                                        </label>
                                    </div>
                                </div>

                                <button class="btn btn-primary" onclick="saveSettings('logistics')">
                                    <i class="bi bi-check-circle"></i> Enregistrer les modifications
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Utilisateurs Tab -->
                    <div class="tab-pane fade" id="users" role="tabpanel" aria-labelledby="users-tab">
                        <div class="card">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center mb-4">
                                    <h5 class="card-title mb-0">Gestion des Utilisateurs</h5>
                                    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addUserModal">
                                        <i class="bi bi-plus-circle"></i> Ajouter Utilisateur
                                    </button>
                                </div>

                                <div class="table-responsive">
                                    <table class="table">
                                        <thead class="table-light">
                                            <tr>
                                                <th>Nom</th>
                                                <th>Email</th>
                                                <th>Rôle</th>
                                                <th>Statut</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Admin Principal</td>
                                                <td>admin@magasin.com</td>
                                                <td><span class="badge bg-danger">Administrateur</span></td>
                                                <td><span class="badge bg-success">Actif</span></td>
                                                <td>
                                                    <button class="btn btn-sm btn-outline-primary">Éditer</button>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Jean Dupuis</td>
                                                <td>jean@magasin.com</td>
                                                <td><span class="badge bg-warning">Gestionnaire</span></td>
                                                <td><span class="badge bg-success">Actif</span></td>
                                                <td>
                                                    <button class="btn btn-sm btn-outline-primary">Éditer</button>
                                                    <button class="btn btn-sm btn-outline-danger">Supprimer</button>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Marie Bernard</td>
                                                <td>marie@magasin.com</td>
                                                <td><span class="badge bg-info">Vendeur</span></td>
                                                <td><span class="badge bg-success">Actif</span></td>
                                                <td>
                                                    <button class="btn btn-sm btn-outline-primary">Éditer</button>
                                                    <button class="btn btn-sm btn-outline-danger">Supprimer</button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Sécurité Tab -->
                    <div class="tab-pane fade" id="security" role="tabpanel" aria-labelledby="security-tab">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title mb-4">Paramètres de Sécurité</h5>

                                <h6>Mot de Passe</h6>
                                <div class="mb-3">
                                    <label for="oldPassword" class="form-label">Mot de passe actuel</label>
                                    <input type="password" class="form-control" id="oldPassword">
                                </div>

                                <div class="mb-3">
                                    <label for="newPassword" class="form-label">Nouveau mot de passe</label>
                                    <input type="password" class="form-control" id="newPassword">
                                </div>

                                <div class="mb-3">
                                    <label for="confirmPassword" class="form-label">Confirmer mot de passe</label>
                                    <input type="password" class="form-control" id="confirmPassword">
                                </div>

                                <button class="btn btn-primary mb-4" onclick="changePassword()">
                                    <i class="bi bi-check-circle"></i> Mettre à jour le mot de passe
                                </button>

                                <hr>

                                <h6>Authentification à Deux Facteurs</h6>
                                <p>Renforcez la sécurité de votre compte avec l'authentification à deux facteurs.</p>

                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="checkbox" id="enable2FA">
                                    <label class="form-check-label" for="enable2FA">
                                        Activer l'authentification à deux facteurs
                                    </label>
                                </div>

                                <button class="btn btn-outline-secondary">
                                    <i class="bi bi-shield-lock"></i> Configurer 2FA
                                </button>

                                <hr>

                                <h6>Sessions Actives</h6>
                                <p>Gérez toutes les sessions actives de votre compte.</p>

                                <div class="list-group mb-3">
                                    <div class="list-group-item">
                                        <div class="d-flex justify-content-between">
                                            <div>
                                                <strong>Navigateur Actuel</strong>
                                                <br>
                                                <small class="text-muted">Chrome - Windows - Dernière activité: À l'instant</small>
                                            </div>
                                            <small class="text-success">Actif</small>
                                        </div>
                                    </div>
                                </div>

                                <button class="btn btn-outline-danger" onclick="logoutAllSessions()">
                                    <i class="bi bi-box-arrow-right"></i> Déconnecter toutes les autres sessions
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Modal Ajouter Utilisateur -->
    <div class="modal fade" id="addUserModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Ajouter Utilisateur</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addUserForm">
                        <div class="mb-3">
                            <label for="userName" class="form-label">Nom Complet</label>
                            <input type="text" class="form-control" id="userName" required>
                        </div>
                        <div class="mb-3">
                            <label for="userEmail" class="form-label">Email</label>
                            <input type="email" class="form-control" id="userEmail" required>
                        </div>
                        <div class="mb-3">
                            <label for="userRole" class="form-label">Rôle</label>
                            <select class="form-control" id="userRole" required>
                                <option value="">Sélectionner un rôle</option>
                                <option value="admin">Administrateur</option>
                                <option value="manager">Gestionnaire</option>
                                <option value="seller">Vendeur</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="button" class="btn btn-primary">Ajouter</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Vérifier si l'utilisateur est connecté
        if (localStorage.getItem('isLoggedIn') !== 'true') {
            window.location.href = 'login.html';
        } else {
            const userName = localStorage.getItem('userName') || 'Admin';
            const elements = document.querySelectorAll('#userName');
            elements.forEach(el => {
                el.textContent = userName;
            });
        }

        function logout() {
            if (confirm('Êtes-vous sûr de vouloir vous déconnecter ?')) {
                localStorage.removeItem('isLoggedIn');
                localStorage.removeItem('userEmail');
                localStorage.removeItem('userName');
                window.location.href = 'home.html';
            }
        }
    </script>
</body>
</html>
